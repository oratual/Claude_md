#!/bin/bash
# üîç Check Night Operations Status

echo "ü¶á BATMAN NIGHT OPERATIONS - STATUS CHECK"
echo "========================================"
echo "Current time: $(date)"
echo ""

# Check if running
if pgrep -f "batman.py.*MISI√ìN NOCTURNA" > /dev/null; then
    echo "‚úÖ Batman is ACTIVE"
    echo "PID: $(pgrep -f 'batman.py.*MISI√ìN NOCTURNA')"
else
    echo "‚ùå Batman is NOT running"
fi

# Progress file
if [ -f "/home/lauta/glados/batman-incorporated/night_progress.txt" ]; then
    echo ""
    echo "üìä PROGRESS:"
    cat /home/lauta/glados/batman-incorporated/night_progress.txt
else
    echo "‚ùå No progress file found"
fi

# Recent logs
echo ""
echo "üìã RECENT ACTIVITY (last 10 lines):"
tail -10 /tmp/batman_night_main_*.log 2>/dev/null || echo "No main logs yet"

echo ""
echo "üõ°Ô∏è  MONITOR STATUS:"
tail -5 /tmp/batman_night_monitor.log 2>/dev/null || echo "No monitor logs yet"

# System load
echo ""
echo "üíª SYSTEM STATUS:"
echo "Load: $(uptime | awk -F'load average:' '{print $2}')"
echo "Memory: $(free -h | grep Mem | awk '{print $3"/"$2}')"

# Git status
echo ""
echo "üìÅ GIT STATUS:"
cd /home/lauta/glados/DiskDominator
git status --porcelain | wc -l | xargs echo "Modified files:"

echo ""
echo "========================================"