#!/bin/bash
# Dependencies Installer - Instala dependencias para Infinity Mode

echo "ğŸ¦‡ Instalando dependencias para Infinity Mode..."

# Verificar si estamos en venv
if [[ "$VIRTUAL_ENV" != "" ]]; then
    echo "âœ… Virtual environment detectado: $VIRTUAL_ENV"
    pip_cmd="pip"
else
    echo "âš ï¸ No hay virtual environment, usando pip3"
    pip_cmd="pip3"
fi

# Instalar dependencias Python
echo "ğŸ“¦ Instalando dependencias Python..."

deps=("psutil" "pyyaml" "rich" "textual")

for dep in "${deps[@]}"; do
    echo "  Instalando $dep..."
    $pip_cmd install "$dep" --quiet
    if [ $? -eq 0 ]; then
        echo "    âœ… $dep instalado"
    else
        echo "    âŒ Error instalando $dep"
    fi
done

# Verificar instalaciÃ³n
echo "ğŸ” Verificando instalaciÃ³n..."
python3 -c "
try:
    import psutil, yaml, rich, textual
    print('âœ… Todas las dependencias estÃ¡n disponibles')
except ImportError as e:
    print(f'âŒ Dependencia faltante: {e}')
"

echo "ğŸ‰ InstalaciÃ³n completada!"
